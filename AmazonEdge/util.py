def flatten_idx(position, size):
    (x, y) = position
    return x * size + y
